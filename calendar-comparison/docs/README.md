# ドキュメント

このディレクトリには、カレンダーアプリケーションの技術ドキュメントが含まれています。

## 目次

### [パフォーマンス考慮事項](./performance.md)

アプリケーションのパフォーマンス最適化に関する詳細なドキュメント：

- **重なり検知とレイアウト計算の最適化**
  - `assignColumns`関数の最適化（O(n³) → O(n²)）
  - 計算量の改善とその効果

- **RAFスロットリング**
  - 60fpsでの滑らかなドラッグ操作の実現
  - 無駄な再レンダリングの削減

- **ドラッグ処理のアーキテクチャ**
  - なぜ元のイベントを除外できないのか
  - CSSによる表示制御の仕組み

- **ベストプラクティス**
  - 高頻度で実行される処理の最適化手法
  - メモ化とキャッシュの活用

- **今後の改善案**
  - 仮想化、Web Workers、インデックス構造など

## 開発者向けガイドライン

パフォーマンスに影響する変更を行う際は、以下を必ず確認してください：

1. **計算量の確認**
   - ネストされたループの回数
   - 配列操作（indexOf, slice, filter, some）の使用頻度

2. **テストの実行**
   ```bash
   npm run test
   ```

3. **動作確認**
   - 30個以上のイベントでドラッグ操作が滑らかか
   - 開発者ツールのパフォーマンスタブでフレームレートを確認

4. **ドキュメントの更新**
   - 新しい最適化を行った場合、このドキュメントを更新

## 関連ファイル

- `src/shared/utils/overlapUtils.ts` - 重なり検知とレイアウト計算
- `src/shared/utils/rafThrottle.ts` - RAFスロットリング
- `src/absolute/hooks/useDragEvent.ts` - Absoluteモードのドラッグ処理
- `src/grid/hooks/useDragEvent.ts` - Gridモードのドラッグ処理
- `src/shared/contexts/DragPreviewContext.tsx` - ドラッグプレビュー管理
